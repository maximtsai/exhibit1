const NORMAL="normal",HOVER="hover",PRESS="press",DISABLE="disable";class Button{constructor(e,s,t,i,a,h,r,l=0){this.scene=e,this.state="normal",this.normal=i,this.hover=a||i,this.press=h||i,this.disable=r||i,this.onMouseUpFunc=t,this.imageRefs={},this.oldImageRef=null,this.currImageRef=null,this.priority=l,gameObjects.buttonList.push(this),this.container=s,this.setState(NORMAL)}setState(e){let s;switch(e){case NORMAL:s=this.normal;break;case HOVER:s=this.hover;break;case PRESS:s=this.press;break;case DISABLE:s=this.disable;break;default:return void console.error("Invalid state ",e)}if(this.state=e,s.ref){this.oldImageRef=this.currImageRef,this.currImageRef=s.ref,this.imageRefs[this.oldImageRef]&&(this.imageRefs[this.oldImageRef].visible=!1);let e=this.imageRefs[s.ref];e||(e=s.atlas?this.scene.add.sprite(0,0,s.atlas,s.ref):this.scene.add.sprite(0,0,s.ref),this.container.add(e),this.imageRefs[s.ref]=e),e.visible=!0}let t=this.imageRefs[this.oldImageRef];t||(t=this.imageRefs[this.currImageRef]),void 0===s.x?this.imageRefs[s.ref].x=t.x||0:this.imageRefs[s.ref].x=s.x,void 0===s.y?this.imageRefs[s.ref].y=t.y||0:this.imageRefs[s.ref].y=s.y,void 0===s.alpha?this.imageRefs[s.ref].alpha=t.alpha||1:this.imageRefs[s.ref].alpha=s.alpha,void 0===s.scaleX?this.imageRefs[s.ref].scaleX=t.scaleX||1:this.imageRefs[s.ref].scaleX=s.scaleX,void 0===s.scaleY?this.imageRefs[s.ref].scaleY=t.scaleY||1:this.imageRefs[s.ref].scaleY=s.scaleY}checkCoordOver(e,s){if(this.state===DISABLE)return!1;let t=e-this.container.x,i=s-this.container.y,a=this.imageRefs[this.currImageRef],h=.5*a.width*Math.abs(a.scaleX),r=.5*a.height*Math.abs(a.scaleY),l=a.x-h,o=a.x+h;if(t<l||t>o)return!1;let f=a.y-r,n=a.y+r;return!(i<f||i>n)}onHover(){this.state===NORMAL&&this.setState(HOVER)}onMouseDown(){this.state!==DISABLE&&this.setState(PRESS)}onMouseUp(){this.state===PRESS&&(this.setState(HOVER),this.onMouseUpFunc&&this.onMouseUpFunc())}setOnClickFunc(e){this.onMouseUpFunc=e}setNormalRef(e){this.normal.ref=e,this.state===NORMAL&&this.setState(NORMAL)}setHoverRef(e){this.hover.ref=e,this.state===HOVER&&this.setState(HOVER)}setPressRef(e){this.press.ref=e,this.state===PRESS&&this.setState(PRESS)}setDisableRef(e){this.disable.ref=e,this.state===DISABLE&&this.setState(DISABLE)}setAllRef(e){this.normal.ref=e,this.hover.ref=e,this.press.ref=e,this.disable.ref=e,this.setState(this.state)}setPos(e,s){this.normal.x=e,this.normal.y=s,this.hover.x=e,this.hover.y=s,this.press.x=e,this.press.y=s,this.disable.x=e,this.disable.y=s;for(let t in this.imageRefs)this.imageRefs[t].x=e,this.imageRefs[t].y=s}setScale(e){this.normal.scaleX=e,this.normal.scaleY=e,this.hover.scaleX=e,this.hover.scaleY=e,this.press.scaleX=e,this.press.scaleY=e,this.disable.scaleX=e,this.disable.scaleY=e}getXPos(){return this.normal.x}getYPos(){return this.normal.y}getState(){return this.state}runFuncOnImage(e){e(this.imageRefs[this.currImageRef])}update(){}destroy(){for(let e in gameObjects.buttonList)if(gameObjects.buttonList[e]===this){gameObjects.buttonList.splice(parseInt(e),1);break}for(let e in this.imageRefs)this.imageRefs[e].destroy()}}