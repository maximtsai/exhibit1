class Exhibit{constructor(t,e,s,i,n,h){this.scene=t,this.listOfBGs=[],this.listOfShadows=[],this.listOfForegrounds=[],this.listOfBtnCtnrs=[],this.listOfDarks=[],this.listOfLists=[this.listOfBGs,this.listOfShadows,this.listOfForegrounds,this.listOfBtnCtnrs,this.listOfDarks],this.listOfCantMove=[!1,!1],this.resetListOfCantMove(),this.currentScene=1,this.leftImage=null,this.centerImage=null,this.rightImage=null,this.bgContainer=e,this.shadowContainer=s,this.foregroundContainer=i,this.btnContainer=n,this.darkContainer=h,this.isMoving=!1,this.peekAmt=80,this.centerSpot=gameVars.halfWidth,this.leftSpot=-gameVars.halfWidth-this.peekAmt,this.rightSpot=gameVars.halfWidth+gameVars.width+this.peekAmt,gameVars.lateUpdateCurrentScene=1,messageBus.subscribe("exhibitMoveComplete",t=>{gameVars.lateUpdateCurrentScene=t})}initPos(t){this.currentScene=t;for(let t=0;t<this.listOfLists.length;t++){let e=this.listOfLists[t];e[this.currentScene]&&(this.centerImage=e[this.currentScene],this.centerImage.x=gameVars.halfWidth)}}moveLeft(){if(gameVarsTemp.hasMoved=!0,this.needCleanup)updateInfoTextSoft("Clean up the room first.",2250);else if(gameVars.darkPoint&&this.currentScene>=3&&(this.needCleanup=!0),this.currentScene>0&&!this.isMoving){disableMoveButtons(),this.isMoving=!0;let t=this.currentScene;for(this.currentScene--;!this.listOfBGs[this.currentScene];)if(this.currentScene--,this.currentScene<0)return;messageBus.publish("exhibitMove",this.currentScene,t),messageBus.publish("exhibitMoveLeft",this.currentScene,t),gameObjects.exhibCntr.swayAccX=-.8;for(let e=0;e<this.listOfLists.length;e++){let s=this.listOfLists[e];this.shiftListLeft(s,this.currentScene,t,0===e)}gameObjects.flashDim.brightVal=.1}}shiftListLeft(t,e,s,i){let n=gameVars.walkSlow?3300:1500;this.centerImage=t[e],this.centerImage&&(this.centerImage.x=this.leftSpot,this.shiftAnimCenter=this.scene.tweens.timeline({targets:this.centerImage,tweens:[{ease:"Cubic.easeInOut",x:this.centerSpot,duration:n}]})),this.rightImage=t[s],this.rightImage&&(this.rightImage.x=this.centerSpot,this.shiftAnimRight=this.scene.tweens.timeline({targets:this.rightImage,tweens:[{ease:"Cubic.easeInOut",x:this.rightSpot,duration:n,onComplete:()=>{i&&(this.isMoving=!1,gameObjects.exhibCntr.swayAccX=-.08,gameObjects.exhibCntr.swayAccY=.05,gameObjects.exhibCntr.swayAmt=.025,messageBus.publish("exhibitMoveComplete",this.currentScene),this.listOfCantMove[e]?0!==e&&enableMoveLeftButton():0===e?enableMoveRightButton():enableMoveButtons())}}]}))}moveRight(t){if(gameVarsTemp.hasMoved=!0,this.currentScene<this.listOfBGs.length-1&&!this.isMoving){disableMoveButtons(),this.isMoving=!0;let e=this.currentScene;for(this.currentScene++;!this.listOfBGs[this.currentScene];)if(this.currentScene++,this.currentScene>=this.listOfBGs.length)return;messageBus.publish("exhibitMove",this.currentScene,e),messageBus.publish("exhibitMoveRight",this.currentScene,e),gameObjects.exhibCntr.swayAccX=.8;for(let s=0;s<this.listOfLists.length;s++){let i=this.listOfLists[s];this.shiftListRight(i,this.currentScene,e,0===s,t)}gameObjects.flashDim.brightVal=.1}}shiftListRight(t,e,s,i,n){let h=gameVars.walkSlow?3500:1500;n&&(h=1),this.centerImage=t[e],this.centerImage&&(this.centerImage.x=this.rightSpot,this.shiftAnimCenter=this.scene.tweens.timeline({targets:this.centerImage,tweens:[{ease:"Cubic.easeInOut",x:this.centerSpot,duration:h}]})),this.leftImage=t[s],this.leftImage&&(this.leftImage.x=this.centerSpot,this.shiftAnimRight=this.scene.tweens.timeline({targets:this.leftImage,tweens:[{ease:"Cubic.easeInOut",x:this.leftSpot,duration:h,onComplete:()=>{i&&(this.isMoving=!1,gameObjects.exhibCntr.swayAccX=n?.01:.08,gameObjects.exhibCntr.swayAccY=n?.01:.05,gameObjects.exhibCntr.swayAmt=.025,messageBus.publish("exhibitMoveComplete",this.currentScene),this.listOfCantMove[e]?enableMoveLeftButton():enableMoveButtons())}}]}))}setBackgroundAtIndex(t,e,s){let i=this.scene.add.sprite(-9999,gameVars.halfHeight,e,s);this.bgContainer.add(i),this.listOfBGs[t]&&this.listOfBGs[t].destroy(),this.listOfBGs[t]=i,t===this.currentScene&&(this.listOfBGs[t].x=this.centerSpot)}setShadowAtIndex(t,e){let s=this.scene.add.sprite(-9999,gameVars.halfHeight,e);this.shadowContainer.add(s),this.listOfShadows[t]&&this.listOfShadows[t].destroy(),this.listOfShadows[t]=s,t===this.currentScene&&(this.listOfShadows[t].x=this.centerSpot)}setForegroundAtIndex(t,e,s,i){let n=i||gameVars.halfHeight,h=this.scene.add.sprite(-9999,n,e,s);h.setDepth(5),this.foregroundContainer.add(h),this.listOfForegrounds[t]&&this.listOfForegrounds[t].destroy(),this.listOfForegrounds[t]=h,t===this.currentScene&&(this.listOfForegrounds[t].x=this.centerSpot)}addBtnCtnrToIndex(t,e){e.x=-9999,this.btnContainer.add(e),this.listOfBtnCtnrs[t]&&this.currentScene===t&&(this.listOfBtnCtnrs[t].x=-9999),this.listOfBtnCtnrs[t]=e}removeBtnCtnrFromIndex(t){this.listOfBtnCtnrs[t]=[]}setDarkAtIndex(t,e){}removeDarkAtIndex(t){this.listOfDarks[t]&&this.listOfDarks[t].destroy()}removeIndex(t){this.listOfBGs[t]=null,this.listOfShadows[t]=null,this.listOfForegrounds[t]=null,this.listOfBtnCtnrs[t]=null,this.listOfDarks[t]=null}resetListOfCantMove(){this.listOfCantMove=[!1,!1,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!0,!0,!0,!0]}setCantMoveIdx(t,e=!1){this.listOfCantMove[t]=e}getCurrentScene(){return this.currentScene}update(){}}